M4[[m]]$description <- NA;
M4[[m]] <- structure(M4[[m]],class="Mdata")
m <- m + 1;
}
rm(Quarterly_train)
# Monthly data
Monthly_train <- read_csv("data/Monthly-train.csv")
typesQuantity <- c(5728,10987,10017,10016,10975,277);
dataFreq <- 12;
h <- 18;
for(i in 1:nrow(Monthly_train)){
M4[[paste0("M",sprintf("%05d",i))]] <- list();
x <- as.numeric(Monthly_train[i,]);
x <- ts(x[!is.na(x)],frequency=dataFreq);
n <- length(x);
M4[[m]]$x <- ts(x[1:(n-h)],frequency=dataFreq);
M4[[m]]$xx <- ts(x[(n-h+1):n],start=time(x)[n-h]+deltat(x),frequency=dataFreq);
M4[[m]]$h <- h;
M4[[m]]$st <- paste0("M",sprintf("%05d",i));
M4[[m]]$n <- n;
M4[[m]]$sn <- paste0("N",sprintf("%06d",m));
M4[[m]]$period <- "MONTHLY";
M4[[m]]$type <- dataTypes[which((i-1) < cumsum(typesQuantity))[1]]
M4[[m]]$description <- NA;
M4[[m]] <- structure(M4[[m]],class="Mdata")
m <- m + 1;
}
rm(Monthly_train)
# Weekly data
Weekly_train <- read_csv("data/Weekly-train.csv")
typesQuantity <- c(24,164,6,41,112,12);
dataFreq <- 52;
h <- 13;
for(i in 1:nrow(Weekly_train)){
M4[[paste0("W",sprintf("%05d",i))]] <- list();
x <- as.numeric(Weekly_train[i,]);
x <- ts(x[!is.na(x)],frequency=dataFreq);
n <- length(x);
M4[[m]]$x <- ts(x[1:(n-h)],frequency=dataFreq);
M4[[m]]$xx <- ts(x[(n-h+1):n],start=time(x)[n-h]+deltat(x),frequency=dataFreq);
M4[[m]]$h <- h;
M4[[m]]$st <- paste0("W",sprintf("%05d",i));
M4[[m]]$n <- n;
M4[[m]]$sn <- paste0("N",sprintf("%06d",m));
M4[[m]]$period <- "WEEKLY";
M4[[m]]$type <- dataTypes[which((i-1) < cumsum(typesQuantity))[1]]
M4[[m]]$description <- NA;
M4[[m]] <- structure(M4[[m]],class="Mdata")
m <- m + 1;
}
rm(Weekly_train)
# Daily data
Daily_train <- read_csv("data/Daily-train.csv")
typesQuantity <- c(10,1559,422,127,1476,633);
dataFreq <- 365;
h <- 14;
for(i in 1:nrow(Daily_train)){
M4[[paste0("D",sprintf("%05d",i))]] <- list();
x <- as.numeric(Daily_train[i,]);
x <- ts(x[!is.na(x)],frequency=dataFreq);
n <- length(x);
M4[[m]]$x <- ts(x[1:(n-h)],frequency=dataFreq);
M4[[m]]$xx <- ts(x[(n-h+1):n],start=time(x)[n-h]+deltat(x),frequency=dataFreq);
M4[[m]]$h <- h;
M4[[m]]$st <- paste0("D",sprintf("%05d",i));
M4[[m]]$n <- n;
M4[[m]]$sn <- paste0("N",sprintf("%06d",m));
M4[[m]]$period <- "DAILY";
M4[[m]]$type <- dataTypes[which((i-1) < cumsum(typesQuantity))[1]]
M4[[m]]$description <- NA;
M4[[m]] <- structure(M4[[m]],class="Mdata")
m <- m + 1;
}
rm(Daily_train)
# Hourly data
Hourly_train <- read_csv("data/Hourly-train.csv")
typesQuantity <- c(0,0,0,0,0,414);
dataFreq <- 24;
h <- 48;
for(i in 1:nrow(Hourly_train)){
M4[[paste0("H",sprintf("%05d",i))]] <- list();
x <- as.numeric(Hourly_train[i,]);
x <- ts(x[!is.na(x)],frequency=dataFreq);
n <- length(x);
M4[[m]]$x <- ts(x[1:(n-h)],frequency=dataFreq);
M4[[m]]$xx <- ts(x[(n-h+1):n],start=time(x)[n-h]+deltat(x),frequency=dataFreq);
M4[[m]]$h <- h;
M4[[m]]$st <- paste0("H",sprintf("%05d",i));
M4[[m]]$n <- n;
M4[[m]]$sn <- paste0("N",sprintf("%06d",m));
M4[[m]]$period <- "HOURLY";
M4[[m]]$type <- dataTypes[which((i-1) < cumsum(typesQuantity))[1]]
M4[[m]]$description <- NA;
M4[[m]] <- structure(M4[[m]],class="Mdata")
m <- m + 1;
}
rm(Hourly_train)
M4 <- structure(M4,class="Mcomp")
# Yearly data
Yearly_train <- read_csv("data-raw/Yearly-train.csv");
rm(list=ls())
library(readr)
M4 <- list();
m <- 1;
dataTypes <- c("DEMOGRAPHIC","FINANCE","INDUSTRIAL","MACRO","MICRO","OTHER");
# Yearly data
Yearly_train <- read_csv("data-raw/Yearly-train.csv");
typesQuantity <- c(1088,6519,3716,3903,6538,1236);
dataFreq <- 1;
h <- 6;
for(i in 1:nrow(Yearly_train)){
M4[[paste0("Y",sprintf("%05d",i))]] <- list();
x <- as.numeric(Yearly_train[i,]);
x <- ts(x[!is.na(x)],frequency=dataFreq);
n <- length(x);
M4[[m]]$x <- ts(x[1:(n-h)],frequency=dataFreq);
M4[[m]]$xx <- ts(x[(n-h+1):n],start=time(x)[n-h]+deltat(x),frequency=dataFreq);
M4[[m]]$h <- h;
M4[[m]]$st <- paste0("Y",sprintf("%05d",i));
M4[[m]]$n <- n;
M4[[m]]$sn <- paste0("N",sprintf("%06d",m));
M4[[m]]$period <- "YEARLY";
M4[[m]]$type <- dataTypes[which((i-1) < cumsum(typesQuantity))[1]]
M4[[m]]$description <- NA;
M4[[m]] <- structure(M4[[m]],class="Mdata")
m <- m + 1;
}
rm(Yearly_train)
# Quarterly data
Quarterly_train <- read_csv("data-raw/Quarterly-train.csv")
typesQuantity <- c(1858,5305,4637,5315,6020,865);
dataFreq <- 4;
h <- 8;
for(i in 1:nrow(Quarterly_train)){
M4[[paste0("Q",sprintf("%05d",i))]] <- list();
x <- as.numeric(Quarterly_train[i,]);
x <- ts(x[!is.na(x)],frequency=dataFreq);
n <- length(x);
M4[[m]]$x <- ts(x[1:(n-h)],frequency=dataFreq);
M4[[m]]$xx <- ts(x[(n-h+1):n],start=time(x)[n-h]+deltat(x),frequency=dataFreq);
M4[[m]]$h <- h;
M4[[m]]$st <- paste0("Q",sprintf("%05d",i));
M4[[m]]$n <- n;
M4[[m]]$sn <- paste0("N",sprintf("%06d",m));
M4[[m]]$period <- "QUARTERLY";
M4[[m]]$type <- dataTypes[which((i-1) < cumsum(typesQuantity))[1]]
M4[[m]]$description <- NA;
M4[[m]] <- structure(M4[[m]],class="Mdata")
m <- m + 1;
}
rm(Quarterly_train)
# Monthly data
Monthly_train <- read_csv("data-raw/Monthly-train.csv")
typesQuantity <- c(5728,10987,10017,10016,10975,277);
dataFreq <- 12;
h <- 18;
for(i in 1:nrow(Monthly_train)){
M4[[paste0("M",sprintf("%05d",i))]] <- list();
x <- as.numeric(Monthly_train[i,]);
x <- ts(x[!is.na(x)],frequency=dataFreq);
n <- length(x);
M4[[m]]$x <- ts(x[1:(n-h)],frequency=dataFreq);
M4[[m]]$xx <- ts(x[(n-h+1):n],start=time(x)[n-h]+deltat(x),frequency=dataFreq);
M4[[m]]$h <- h;
M4[[m]]$st <- paste0("M",sprintf("%05d",i));
M4[[m]]$n <- n;
M4[[m]]$sn <- paste0("N",sprintf("%06d",m));
M4[[m]]$period <- "MONTHLY";
M4[[m]]$type <- dataTypes[which((i-1) < cumsum(typesQuantity))[1]]
M4[[m]]$description <- NA;
M4[[m]] <- structure(M4[[m]],class="Mdata")
m <- m + 1;
}
rm(Monthly_train)
# Weekly data
Weekly_train <- read_csv("data-raw/Weekly-train.csv")
typesQuantity <- c(24,164,6,41,112,12);
dataFreq <- 52;
h <- 13;
for(i in 1:nrow(Weekly_train)){
M4[[paste0("W",sprintf("%05d",i))]] <- list();
x <- as.numeric(Weekly_train[i,]);
x <- ts(x[!is.na(x)],frequency=dataFreq);
n <- length(x);
M4[[m]]$x <- ts(x[1:(n-h)],frequency=dataFreq);
M4[[m]]$xx <- ts(x[(n-h+1):n],start=time(x)[n-h]+deltat(x),frequency=dataFreq);
M4[[m]]$h <- h;
M4[[m]]$st <- paste0("W",sprintf("%05d",i));
M4[[m]]$n <- n;
M4[[m]]$sn <- paste0("N",sprintf("%06d",m));
M4[[m]]$period <- "WEEKLY";
M4[[m]]$type <- dataTypes[which((i-1) < cumsum(typesQuantity))[1]]
M4[[m]]$description <- NA;
M4[[m]] <- structure(M4[[m]],class="Mdata")
m <- m + 1;
}
rm(Weekly_train)
# Daily data
Daily_train <- read_csv("data-raw/Daily-train.csv")
typesQuantity <- c(10,1559,422,127,1476,633);
dataFreq <- 365;
h <- 14;
for(i in 1:nrow(Daily_train)){
M4[[paste0("D",sprintf("%05d",i))]] <- list();
x <- as.numeric(Daily_train[i,]);
x <- ts(x[!is.na(x)],frequency=dataFreq);
n <- length(x);
M4[[m]]$x <- ts(x[1:(n-h)],frequency=dataFreq);
M4[[m]]$xx <- ts(x[(n-h+1):n],start=time(x)[n-h]+deltat(x),frequency=dataFreq);
M4[[m]]$h <- h;
M4[[m]]$st <- paste0("D",sprintf("%05d",i));
M4[[m]]$n <- n;
M4[[m]]$sn <- paste0("N",sprintf("%06d",m));
M4[[m]]$period <- "DAILY";
M4[[m]]$type <- dataTypes[which((i-1) < cumsum(typesQuantity))[1]]
M4[[m]]$description <- NA;
M4[[m]] <- structure(M4[[m]],class="Mdata")
m <- m + 1;
}
rm(Daily_train)
# Hourly data
Hourly_train <- read_csv("data-raw/Hourly-train.csv")
typesQuantity <- c(0,0,0,0,0,414);
dataFreq <- 24;
h <- 48;
for(i in 1:nrow(Hourly_train)){
M4[[paste0("H",sprintf("%05d",i))]] <- list();
x <- as.numeric(Hourly_train[i,]);
x <- ts(x[!is.na(x)],frequency=dataFreq);
n <- length(x);
M4[[m]]$x <- ts(x[1:(n-h)],frequency=dataFreq);
M4[[m]]$xx <- ts(x[(n-h+1):n],start=time(x)[n-h]+deltat(x),frequency=dataFreq);
M4[[m]]$h <- h;
M4[[m]]$st <- paste0("H",sprintf("%05d",i));
M4[[m]]$n <- n;
M4[[m]]$sn <- paste0("N",sprintf("%06d",m));
M4[[m]]$period <- "HOURLY";
M4[[m]]$type <- dataTypes[which((i-1) < cumsum(typesQuantity))[1]]
M4[[m]]$description <- NA;
M4[[m]] <- structure(M4[[m]],class="Mdata")
m <- m + 1;
}
rm(Hourly_train)
M4 <- structure(M4,class="Mcomp")
M4
ym4 <- subset(M4, "yearly")
ym4
M4[["Y1"]]
M4[["Y00001"]]
M4[["N1"]]
names(M4)
paste0("Y", 1)
M3[[1]]
M3[[1]]
M3[[1]]$sn
M4[[1]]$xx
M4[[1]]
M4[[1]]$type
# yearly data
for (i in 1: 23000){
y <- (yearly[i,-1])
M4[[paste0("Y",i)]] <- list(x=ts(y[!is.na(y)], frequency=1),
st=as.character(yearly_info[i,"M4id"]),
type=as.character(yearly_info[i,"category"]),
period=as.character(yearly_info[i,"SP"]),
h=as.character(yearly_info[i,"Horizon"]),
n = length(x))
M4[[paste0("Y",i)]] <- structure(M4[[paste0("Y",i)]], class="Mdata")
}
library(readr)
#M4_info
M4_info <- read.csv("data-raw/M4-info.csv")
dim(M4_info) # 100000 5
yearly <- read.csv("data-raw/Yearly-train.csv")
dim(yearly) # 23000 836
yearly_info <- M4_info[1:23000,]
dim(yearly_info) # 23000 5
# monthly data
monthly <- read.csv("data-raw/Monthly-train.csv")
dim(monthly) # 48000 2795
monthly_info <- subset(M4_info, SP=="Monthly")
dim(monthly_info) # 48000 5
# Quarterly data
quarterly <- read.csv("data-raw/Quarterly-train.csv")
dim(quarterly) # 24000 867
quarterly_info <- subset(M4_info, SP=="Quarterly")
dim(quarterly_info) # 24000 5
# Weekly data
weekly <- read.csv("data-raw/Weekly-train.csv")
dim(weekly) # 359 2598
weekly_info <- subset(M4_info, SP=="Weekly")
dim(weekly_info) # 359 5
# daily data
daily <- read.csv("data-raw/Daily-train.csv")
dim(daily) # 4227 9920
daily_info <- subset(M4_info, SP=="Daily")
dim(daily_info) # 4227 5
# Hourly data
hourly <- read.csv("data-raw/Hourly-train.csv")
dim(hourly) # 414 961
hourly_info <- subset(M4_info, SP=="Hourly")
dim(hourly_info) # 414 5
# data processing
M4 <- list()
# yearly data
for (i in 1: 23000){
y <- (yearly[i,-1])
M4[[paste0("Y",i)]] <- list(x=ts(y[!is.na(y)], frequency=1),
st=as.character(yearly_info[i,"M4id"]),
type=as.character(yearly_info[i,"category"]),
period=as.character(yearly_info[i,"SP"]),
h=as.character(yearly_info[i,"Horizon"]),
n = length(x))
M4[[paste0("Y",i)]] <- structure(M4[[paste0("Y",i)]], class="Mdata")
}
M4[[1]]
M4[["Y1"]]
M4[[100000]]
M4
# quarterly data
for (i in 1: 24000){
y <- (quarterly[i,-1])
M4[[paste0("Q",i)]] <- list(x=ts(y[!is.na(y)], frequency=4),
st=as.character(quarterly_info[i,"M4id"]),
type=as.character(quarterly_info[i,"category"]),
period=as.character(quarterly_info[i,"SP"]),
h=as.character(quarterly_info[i,"Horizon"]),
n = length(x))
M4[[paste0("Q",i)]] <- structure(M4[[paste0("Q",i)]], class="Mdata")
}
M4[["Q1"]]
# monthly data
for (i in 1: 48000){
y <- (monthly[i,-1])
M4[[paste0("M",i)]] <- list(x=ts(y[!is.na(y)], frequency=12),
st=as.character(monthly_info[i,"M4id"]),
type=as.character(monthly_info[i,"category"]),
period=as.character(monthly_info[i,"SP"]),
h=as.character(monthly_info[i,"Horizon"]),
n = length(x))
M4[[paste0("M",i)]] <- structure(M4[[paste0("M",i)]], class="Mdata")
}
# weekly data
for (i in 1: 359){
y <- (weekly[i,-1])
M4[[paste0("W",i)]] <- list(x=ts(y[!is.na(y)], frequency=52),
st=as.character(weekly_info[i,"M4id"]),
type=as.character(weekly_info[i,"category"]),
period=as.character(weekly_info[i,"SP"]),
h=as.character(weekly_info[i,"Horizon"]),
n = length(x))
M4[[paste0("W",i)]] <- structure(M4[[paste0("W",i)]], class="Mdata")
}
#  daily data
for (i in 1: 4227){
y <- (daily[i,-1])
daily_list[[paste0("D",i)]] <- list(x=ts(y[!is.na(y)], frequency=365),
st=as.character(daily_info[i,"M4id"]),
type=as.character(daily_info[i,"category"]),
period=as.character(daily_info[i,"SP"]),
h=as.character(daily_info[i,"Horizon"]),
n = length(x))
M4[[paste0("D",i)]] <- structure(M4[[paste0("D",i)]], class="Mdata")
}
#  daily data
for (i in 1: 4227){
y <- (daily[i,-1])
M4[[paste0("D",i)]] <- list(x=ts(y[!is.na(y)], frequency=365),
st=as.character(daily_info[i,"M4id"]),
type=as.character(daily_info[i,"category"]),
period=as.character(daily_info[i,"SP"]),
h=as.character(daily_info[i,"Horizon"]),
n = length(x))
M4[[paste0("D",i)]] <- structure(M4[[paste0("D",i)]], class="Mdata")
}
# hourly data
for (i in 1: 414){
y <- (hourly[i,-1])
M4[[paste0("H",i)]] <- list(x=ts(y[!is.na(y)], frequency=24),
st=as.character(hourly_info[i,"M4id"]),
type=as.character(hourly_info[i,"category"]),
period=as.character(hourly_info[i,"SP"]),
h=as.character(hourly_info[i,"Horizon"]),
n = length(x))
M4[[paste0("H",i)]] <- structure(M4[[paste0("H",i)]], class="Mdata")
}
M4 <- structure(M4,class="Mcomp")
M4
M4[["Q1"]]
M4[["Q1"]]$x
M4[["Q1"]]$n
ts <- subset(M4, "yearly")
ts <- subset(M4, "Yearly")
libray(Mcomp)
library(Mcomp)
ts <- subset(M4, "Yearly")
M3[[1]]$type
M3
subset.Mcomp()
subset.Mcomp
ts <- subset(M3, "Yearly")
ts <- subset(M3, "Demo")
ts
x <- "MiXeD cAsE 123"
tolower(x)
toupper(x)
library(readr)
#M4_info
M4_info <- read.csv("data-raw/M4-info.csv")
dim(M4_info) # 100000 5
yearly <- read.csv("data-raw/Yearly-train.csv")
dim(yearly) # 23000 836
yearly_info <- M4_info[1:23000,]
dim(yearly_info) # 23000 5
# monthly data
monthly <- read.csv("data-raw/Monthly-train.csv")
dim(monthly) # 48000 2795
monthly_info <- subset(M4_info, SP=="Monthly")
dim(monthly_info) # 48000 5
# Quarterly data
quarterly <- read.csv("data-raw/Quarterly-train.csv")
dim(quarterly) # 24000 867
quarterly_info <- subset(M4_info, SP=="Quarterly")
dim(quarterly_info) # 24000 5
# Weekly data
weekly <- read.csv("data-raw/Weekly-train.csv")
dim(weekly) # 359 2598
weekly_info <- subset(M4_info, SP=="Weekly")
dim(weekly_info) # 359 5
# daily data
daily <- read.csv("data-raw/Daily-train.csv")
dim(daily) # 4227 9920
daily_info <- subset(M4_info, SP=="Daily")
dim(daily_info) # 4227 5
# Hourly data
hourly <- read.csv("data-raw/Hourly-train.csv")
dim(hourly) # 414 961
hourly_info <- subset(M4_info, SP=="Hourly")
dim(hourly_info) # 414 5
# data processing
M4 <- list()
# yearly data
for (i in 1: 23000){
y <- (yearly[i,-1])
M4[[paste0("Y",i)]] <- list(x=ts(y[!is.na(y)], frequency=1),
st=as.character(yearly_info[i,"M4id"]),
type=toupper(as.character(yearly_info[i,"category"])),
period="YEARLY",
h=as.character(yearly_info[i,"Horizon"]),
n = length(x))
M4[[paste0("Y",i)]] <- structure(M4[[paste0("Y",i)]], class="Mdata")
}
# quarterly data
for (i in 1: 24000){
y <- (quarterly[i,-1])
M4[[paste0("Q",i)]] <- list(x=ts(y[!is.na(y)], frequency=4),
st=as.character(quarterly_info[i,"M4id"]),
type=toupper(as.character(quarterly_info[i,"category"])),
period="QUARTERLY",
h=as.character(quarterly_info[i,"Horizon"]),
n = length(x))
M4[[paste0("Q",i)]] <- structure(M4[[paste0("Q",i)]], class="Mdata")
}
# monthly data
for (i in 1: 48000){
y <- (monthly[i,-1])
M4[[paste0("M",i)]] <- list(x=ts(y[!is.na(y)], frequency=12),
st=as.character(monthly_info[i,"M4id"]),
type=toupper(as.character(monthly_info[i,"category"])),
period="MONTHLY",
h=as.character(monthly_info[i,"Horizon"]),
n = length(x))
M4[[paste0("M",i)]] <- structure(M4[[paste0("M",i)]], class="Mdata")
}
# weekly data
for (i in 1: 359){
y <- (weekly[i,-1])
M4[[paste0("W",i)]] <- list(x=ts(y[!is.na(y)], frequency=52),
st=as.character(weekly_info[i,"M4id"]),
type=toupper(as.character(weekly_info[i,"category"])),
period="WEEKLY",
h=as.character(weekly_info[i,"Horizon"]),
n = length(x))
M4[[paste0("W",i)]] <- structure(M4[[paste0("W",i)]], class="Mdata")
}
#  daily data
for (i in 1: 4227){
y <- (daily[i,-1])
M4[[paste0("D",i)]] <- list(x=ts(y[!is.na(y)], frequency=365),
st=as.character(daily_info[i,"M4id"]),
type=toupper(as.character(daily_info[i,"category"])),
period="DAILY",
h=as.character(daily_info[i,"Horizon"]),
n = length(x))
M4[[paste0("D",i)]] <- structure(M4[[paste0("D",i)]], class="Mdata")
}
# hourly data
for (i in 1: 414){
y <- (hourly[i,-1])
M4[[paste0("H",i)]] <- list(x=ts(y[!is.na(y)], frequency=24),
st=as.character(hourly_info[i,"M4id"]),
type=toupper(as.character(hourly_info[i,"category"])),
period="HOURLY",
h=as.character(hourly_info[i,"Horizon"]),
n = length(x))
M4[[paste0("H",i)]] <- structure(M4[[paste0("H",i)]], class="Mdata")
}
M4 <- structure(M4,class="Mcomp")
save(M4,file="M4.Rdata")
ts <- subset(M4, "Yearly")
ts
M4
